<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cat Landlord - Get the App</title>

  <!-- iOS 스마트 배너 (선택) -->
  <meta name="apple-itunes-app" content="app-id=6748405496">

  <!-- Favicon / Touch Icon (브라우저 탭/홈 화면) -->
  <link rel="icon" type="image/png" sizes="32x32" href="./catlandlord_icon.png">
  <link rel="apple-touch-icon" href="./catlandlord_icon.png">

  <!-- GA4 (Firebase 연동) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SSBGLX3XQ6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-SSBGLX3XQ6', { anonymize_ip: true });
  </script>

  <style>
    :root{
      /* Daisy 감성의 브랜드 팔레트 */
      --brand:#D1E468;       /* 메인 */
      --brand-ink:#182215;   /* 로고/제목 텍스트 */
      --ink:#2b2b2b;         /* 본문 */
      --muted:#6b7280;       /* 보조 텍스트 */
      --border:#e5e7eb;      /* 경계선 */
      --bg:#fffdf7;          /* 미색 배경 */
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Pretendard,sans-serif;
      line-height:1.45; padding:24px;
      display:flex; align-items:center; justify-content:center;
    }
    .wrap{width:100%; max-width:720px}
    header{
      display:flex; align-items:center; gap:14px; margin-bottom:18px;
    }

    /* 투명 배경 로고가 잘 보이도록: 부드러운 밝은 캡슐 카드 + 미세 아웃라인 + 그림자 */
    .logoShell{
      display:flex; align-items:center; justify-content:center;
      width:48px; height:48px; padding:6px; border-radius:14px;
      background:linear-gradient(180deg,#ffffff 0%, #fafafa 100%);
      border:1px solid var(--border);
      box-shadow:0 6px 18px rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.9);
    }
    .logoShell img{
      width:100%; height:100%; object-fit:contain;
      /* 투명 로고 가장자리 가독성 향상을 위한 얇은 외곽선 효과 */
      filter:
        drop-shadow(0 0 0.5px rgba(255,255,255,.9))
        drop-shadow(0 0 1px rgba(0,0,0,.07));
    }

    .brandBlock{
      display:flex; flex-direction:column; gap:4px;
    }
    .studio{
      font-weight:800; color:var(--brand-ink); letter-spacing:.2px; font-size:18px;
    }

    /* 게임 뱃지: 아이콘 + 이름을 작은 칩으로 */
    .gameBadge{
      display:inline-flex; align-items:center; gap:8px;
      background:var(--card); padding:6px 10px; border-radius:10px;
      border:1px solid var(--border);
      box-shadow:0 2px 8px rgba(0,0,0,.05);
      width:max-content;
    }
    .gameBadge img{
      width:22px; height:22px; border-radius:6px;
      box-shadow:0 1px 2px rgba(0,0,0,.06);
    }
    .gameBadge b{ font-weight:800; }

    .card{
      border:1px solid var(--border); border-radius:16px; padding:20px;
      background:var(--card);
      box-shadow:0 10px 32px rgba(0,0,0,.07), 0 2px 10px rgba(0,0,0,.05);
    }
    .appinfo{
      display:flex; align-items:center; gap:14px; margin-bottom:10px;
    }
    .appinfo .icon{
      width:64px; height:64px; border-radius:16px; overflow:hidden;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      border:1px solid var(--border);
      background:#fff;
      display:flex; align-items:center; justify-content:center;
    }
    .appinfo .icon img{ width:100%; height:100%; object-fit:cover }
    h1{font-size:22px; margin:0 0 10px 0}
    p{margin:8px 0}
    .muted{color:var(--muted); font-size:14px}

    .buttons{display:flex;gap:10px; flex-wrap:wrap; margin-top:12px}
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:12px 16px; border-radius:12px; border:1px solid var(--border);
      text-decoration:none; color:var(--ink); background:#fff;
      transition:transform .06s ease, box-shadow .2s ease, border-color .2s ease, background .2s;
      will-change:transform;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.06) }
    .btn:active{ transform:translateY(0) }
    .btn--ios::before{ content:""; font-weight:700 }
    .btn--and::before{ content:"▶"; font-weight:700 }

    .progress{ margin-top:14px; height:6px; background:#f1f5f9; border-radius:999px; overflow:hidden }
    .bar{ height:100%; width:0%; background:var(--brand); transition:width 1.2s ease }

    footer{margin-top:14px; font-size:12px; color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header aria-label="Brand Header">
      <div class="logoShell" aria-hidden="true">
        <!-- 투명 배경 로고: 같은 폴더의 logo.png 사용. 없으면 감춤 -->
        <img src="./logo.png" alt="" onerror="this.style.display='none'">
      </div>
      <div class="brandBlock">
        <div class="studio">Off Chance Studio</div>
        <div class="gameBadge" aria-label="Game">
          <img src="./catlandlord_icon.png" alt="" onerror="this.style.display='none'">
          <b>Cat&nbsp;Landlord</b>
        </div>
      </div>
    </header>

    <section class="card" aria-label="Redirect Panel">
      <div class="appinfo">
        <div class="icon" aria-hidden="true">
          <img src="./catlandlord_icon.png" alt="">
        </div>
        <div>
          <h1>Cat Landlord로 이동 중...</h1>
          <p class="muted">기기에 맞는 스토어로 자동 연결됩니다. 자동으로 이동하지 않으면 아래 버튼을 눌러주세요.</p>
        </div>
      </div>

      <div class="buttons">
        <a id="btn-ios" class="btn btn--ios" href="#" aria-label="App Store로 이동"> App Store로 이동</a>
        <a id="btn-android" class="btn btn--and" href="#" aria-label="Google Play로 이동"> Google Play로 이동</a>
      </div>

      <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
      <footer>일부 인앱 브라우저에서는 스토어 호출이 차단될 수 있어요. 그런 경우 버튼을 사용해 주세요.</footer>
    </section>
  </div>

  <script>
    (function(){
      // ★ 필요 시 여기만 수정
      const iosLink = "https://apps.apple.com/app/id6748405496";
      const androidLink = "https://play.google.com/store/apps/details?id=com.offchancestudio.catlandlord";

      // UA 판별 + iPadOS 보정
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const isIPad = /iPad/.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
      const isIPhone = /iPhone/.test(ua);
      const isIPod = /iPod/.test(ua);
      const isIOS = isIPhone || isIPad || isIPod;
      const isAndroid = /Android/i.test(ua);

      // 버튼 수동 이동 링크
      const iosBtn = document.getElementById("btn-ios");
      const andBtn = document.getElementById("btn-android");
      iosBtn.href = iosLink;
      andBtn.href = androidLink;

      // 진행바 애니메이션
      requestAnimationFrame(()=> {
        const bar = document.getElementById('bar');
        if(bar) bar.style.width = '100%';
      });

      // GA4 이벤트 로깅 → 1.2초 지연 후 리다이렉트 (히트 수집 여유)
      function logAndGo(target, osTag){
        try {
          gtag('event', 'redirect', {
            destination: osTag,
            target_url: target
          });
        } catch(e) {}
        setTimeout(()=>location.replace(target), 1200);
      }

      // 자동 분기
      if (isIOS) {
        logAndGo(iosLink, 'ios');
      } else if (isAndroid) {
        logAndGo(androidLink, 'android');
      } else {
        // 데스크톱/기타: 수동 버튼만 노출
      }

      // 수동 클릭 시에도 이벤트 기록
      iosBtn.addEventListener('click', e => { e.preventDefault(); logAndGo(iosLink, 'ios_click'); });
      andBtn.addEventListener('click', e => { e.preventDefault(); logAndGo(androidLink, 'android_click'); });
    })();
  </script>
</body>
</html>
